.header
  .header-left
    .title
      .title__name
        - if user_signed_in?
          = current_user.name
        - else
          ログインしていません
      .title__set
        .title__set__icon
          - if user_signed_in?
            = link_to new_year_path do
              %i{class:"fas fa-cog fa-2x"}
              -# = icon('fas', 'cog', class: 'icon')
  .right-menu
    - if user_signed_in?
      .right-menu__list
        .right-menu__list__btn
          = link_to edit_user_path(current_user) do
            <input type="button" class="btn1" value="登録編集">
      .right-menu__list
        .right-menu__list__btn
          = link_to destroy_user_session_path, method: :delete do
            <input type="button" class="btn1" value="ログアウト">
    - else
      .right-menu__list
        .right-menu__list__btn
          = link_to new_user_registration_path do
            <input type="button" class="btn1" value="新規登録">
      .right-menu__list
        .right-menu__list__btn
          = link_to new_user_session_path do
            <input type="button" class="btn1" value="ログイン">

.main-conts
  .left-conts
    .left-conts__list
      .left-conts__list__title
        .left-conts__list__title__name
          収入
      .left-conts__list__items
        %table{border:"1",class:"table-items"}
          %tr
            %th{class:"item"} 項目
            %th キャッシュフロー
          - @incomes.each do |income|
            %tr
              %td 
                ="#{income.item}"
              %td
                = form_for([@year, @month, income]) do |f|
                  = f.text_field :cf, placeholder:"隣のボタンで更新", class:"cf-text"
                  万円
                  = f.submit "更新"
      .left-conts__list__r-side
        .when
          ="#{@year.year}年#{@month.month}月"
        .edit
          <input type="month">
          <input type="button" value="新規">
          <input type="button" value="更新">
        .total
          ="総収入:#{total_cf(@incomes)}万円"
    .left-conts__list
      .left-conts__list__title
        .left-conts__list__title__name
          支出
      .left-conts__list__items
        %table{border:"1",class:"table-items"}
          %tr
            %th{class:"item"} 項目
            %th キャッシュフロー
          - @expenses.each do |expense|
            %tr
              %td 
                ="#{expense.item}"
              %td
                = form_for([@year, @month, expense]) do |f|
                  = f.text_field :cf, placeholder:"隣のボタンで更新", class:"cf-text"
                  万円
                  = f.submit "更新"
      .left-conts__list__r-side
        .total
          %ul
            %li
              ="総支出:#{total_cf(@expenses)}万円"
            %li
              ="月のCF:#{profit_cf(@month)}万円"
          
  .right-conts
    .right-conts__list
      .right-conts__list__title
        .right-conts__list__title__name
          資産
      .right-conts__list__items
        %table{border:"1",class:"table-items"}
          %tr
            %th{class:"item"} 項目
            %th キャッシュフロー
          %tr
            %td 貯蓄
            %td <input type="number"> 万円
          %tr
            %td 株
            %td <input type="number"> 万円
          %tr
            %td 不動産
            %td <input type="number"> 万円
      .right-conts__list__bottom
        .total
          合計:1000万円
    .right-conts__list
      .right-conts__list__title
        .right-conts__list__title__name
          負債
      .right-conts__list__items
        %table{border:"1",class:"table-items"}
          %tr
            %th{class:"item"} 項目
            %th キャッシュフロー
          %tr
            %td 住宅ローン残高
            %td <input type="number"> 万円
          %tr
            %td 銀行ローン残高
            %td <input type="number"> 万円
          %tr
            %td 奨学金
            %td <input type="number"> 万円
      .right-conts__list__bottom
        .total
          合計:1000万円
          <input type="button" value="更新">
.sub-conts
  - @years.each do |years|
    .sub-conts__list
      .sub-conts__list__title
        .sub-conts__list__title__year
          ="#{years.year}年"
        .sub-conts__list__title__set
          = link_to new_year_month_path(years.id), class: "y-icon" do
            %i{class:"fas fa-cog"}
          = link_to year_path(years.id), method: :delete, class: "y-icon" do
            %i{class:"fas fa-trash-alt"}
      .sub-conts__list__items
        .index
          .month
            月:
          .cf
            CF:
        - @months.where(year_id: years.id).each do |months|
          .result
            .month
              ="#{months.month}月"
              .m-icon
                = link_to year_month_path(years.id, months.id), class: "m-icon" do
                  %i{class:"fas fa-cog"}
                = link_to year_month_path(years.id, months.id), method: :delete, class: "m-icon" do
                  %i{class:"fas fa-trash-alt"}
                = link_to "cf入力", year_month_incomes_path(years.id, months.id)
            .cf
              ="月のCF:#{profit_cf(months)}万円"
        
      .sub-conts__list__right
        .total
          ="合計CF:#{profit_cf(years)}万円"